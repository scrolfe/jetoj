<div class="container">
  <div class="row d-flex justify-content-center">
    <div class="col-xs-12 col-sm-12 col-md-10">
      <div id="mission">
        Jetoj is a music series that makes classical music accessible to all audiences, regardless of opportunity or privilege.
      </div>
    </div>
  </div>

  <ul class="nav nav-tabs" id="performerTabs" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="chicago-tab" data-toggle="tab" href="#chicago" role="tab" aria-controls="chicago" aria-expanded="true">Chicago</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="minneapolis-tab" data-toggle="tab" href="#minneapolis" role="tab" aria-controls="minneapolis">Minneapolis</a>
    </li>
  </ul>
  <div class="tab-content" id="performerTabContent">
    <div class="tab-pane show active" id="chicago" role="tabpanel" aria-labelledby="chicago-tab">
      <div class="carouselContainer">
        <% @chicago_performers.each do |performer| %>
          <div class="chicagoPerformers", style="display: none">
            <%= render 'performers/profile', performer: performer %>
          </div>
        <% end %>
      </div>
    </div>
    <div class="tab-pane" id="minneapolis" role="tabpanel" aria-labelledby="minneapolis-tab">
      <div class="carouselContainer">
        <% @minneapolis_performers.each do |performer| %>
          <div class="minneapolisPerformers", style="display: none">
            <%= render 'performers/profile', performer: performer %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
  // carousel for chicago
  let slidesChicago = $(".chicagoPerformers");
  let slideCountChicago = slidesChicago.length;
  let slideIndexChicago = 1;

  $(slidesChicago[0]).fadeIn(800, () => {
    $(slidesChicago[0]).delay(2400).fadeOut(800)
  })

  setInterval(() => {
    let activeIndex = slideIndexChicago % slideCountChicago;
    for (i = 0; i < slidesChicago.length; i++) {
      $(slidesChicago[i]).css("display", "none");
    }

    $(slidesChicago[activeIndex]).fadeIn(800, () => {
      $(slidesChicago[activeIndex]).delay(2400).fadeOut(800)
    })

    slideIndexChicago++;
  }, 4000);

  // carousel for minneapolis
  let slidesMinneapolis = $(".minneapolisPerformers");
  let slideCountMinneapolis = slidesMinneapolis.length;
  let slideIndexMinneapolis = 1;

  $(slidesMinneapolis[0]).fadeIn(800, () => {
    $(slidesMinneapolis[0]).fadeOut(800)
  })

  setInterval(() => {
    let activeIndex = slideIndexMinneapolis % slideCountMinneapolis;
    for (i = 0; i < slidesMinneapolis.length; i++) {
      $(slidesMinneapolis[i]).css("display", "none");
    }

    $(slidesMinneapolis[activeIndex]).fadeIn(800, () => {
      $(slidesMinneapolis[activeIndex]).delay(2400).fadeOut(800)
    })

    slideIndexMinneapolis++;
  }, 4000);
</script>
